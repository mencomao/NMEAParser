NMEAParser
----------

Java parser for NMEA (including AIS) sentences as well as other utilities
Parses efficiently from different sources, including serial port and net.
Parses "all" NMEA and AIS sentences which are documented outside official 
documentation.

Parser handles transaction. Only sentences having correct checksum are passed.
Application uses observer interface to read field data. All field values are
normalized so that application doesn't have to convert units.

Example:

NMEAParser parser = NMEAParser.newInstance();
NMEAObserver tc = new AbstractNMEAObserver();
parser.parse("$GPTXT,01,01,TARG1,H^D6LM^D6*37\r\n", tc, null);

NMEARouter
----------

A Router for routing NMEA sentences between serial ports and net.

Downloading:

https://search.maven.org/remotecontent?filepath=org/vesalainen/nmea/router/1.0.0/router-1.0.0-jar-with-dependencies.jar

Running:

java -jar router-1.0.0-jar-with-dependencies.jar config.xml

Routing information is read from configuration file.

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<nmea proprietaryPrefix="IRS" ctrlTcpPort="10110">
    <router>
        <seatalk name="SeaTalk">
            <route prefix="$??MTW" target="Net"/>
            <route prefix="$??DBT" target="Net"/>
            <route prefix="$??VHW" target="Net"/>
        </seatalk>
        <nmea-0183 name="Furuno">
            <route prefix="$??RMB" target="Net"/>
            <route prefix="$??RMC" target="Net"/>
            <route prefix="$??BWC" target="Net"/>
            <route prefix="$??GLL" target="Net"/>
            <route prefix="$??GAA" target="Net"/>
            <route prefix="$??VTG" target="Net"/>
            <route prefix="$??ZDA" target="Net"/>
        </nmea-0183>
        <broadcast-nmea-0183 name="Net">
            <route prefix="$PIRS,ST,LAMP" target="SeaTalk"/>
        </broadcast-nmea-0183>
    </router>
</nmea>

Each serial port has a list of prefixes which it is sending and optionally
routing target. When router starts it uses this information to resolv which 
port is which.

In this example we listen for seatalk converter, Furuno GPS and net. All Seatalk 
and Furuno sentences are broadcasted to net.

ctrlTcpPort is a tcp port number control connections. 
Use putty for example.

More complex configuration:

Here we have Simrad autopilot with 2 serial ports, Airmar heading sensor and NAIS
AIS transceiver. We listen Airmar at 4800 and 38400 bauds. If 4800 is matched
it is configured to 38400. 

variation-source enables sending variation messages ($INRMC) to Airmar heading 
sensor. These messages are generated by using code from NOAA.

Airmar heading sensor needs variation to send $HCHDT messages which are needed
by autopilot and also OpenCPN.

AIS messages (!AIVD) are also sent to Marine Traffic

OpenCPN gets NMEA sentences broadcasted.

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<nmea proprietaryPrefix="IRS" ctrlTcpPort="10110">
    <sender>
        <variation-source/>
    </sender>
    <router>
        <nmea-0183 name="Simrad1">
            <route prefix="$AGGLL" target=""/>
            <route prefix="$AGBWW" target=""/>
            <route prefix="$AGBWC" target=""/>
            <route prefix="$AGRMC" target=""/>
            <route prefix="$AGRMB" target=""/>
            <route prefix="$AGRSA" target="Net"/>
            <route prefix="$AGHDT" target=""/>
            <route prefix="$AGHDM" target=""/>
            <route prefix="$AGHDG" target=""/>
            <route prefix="$AGHSC" target=""/>
            <route prefix="$AGXTE" target=""/>
        </nmea-0183>
        <nmea-0183 name="Simrad2">
            <route prefix="$AGRSA" target=""/>
            <route prefix="$AGHDT" target=""/>
            <route prefix="$AGHDM" target=""/>
            <route prefix="$AGHDG" target=""/>
        </nmea-0183>
        <nmea-0183 name="Airmar4800">
            <script>
                loop(10)
                {               
                    send("$PAMTC,BAUD,38400")
                    sleep(1000)
                }
                kill(Airmar4800)
            </script>
            <route prefix="$HCHDT" target="Net Simrad2"/>
        </nmea-0183>
        <nmea-0183-hs name="Airmar">
            <script>
                send("$PAMTC,EN,ALL,1,1")
                kill(Airmar4800)
                # while(waitfor(1000, "$HCHDT")){}
                # restart()
            </script>
            <route prefix="$HCHDT" target="Net Simrad2"/>
            <route prefix="$HCHDG" target="Net"/>
            <route prefix="$TIROT" target="Net"/>
            <route prefix="$YXXDR" target="Net"/>
            <route prefix="$HCTHS" target="Net"/>
        </nmea-0183-hs>
        <nmea-0183-hs name="NAIS">
            <route prefix="$GPGLL" target="Net Simrad1"/>
            <route prefix="$GPRMC" target="Net Simrad1"/>
            <route prefix="$GPGGA" target="Net Simrad1"/>
            <route prefix="!AIVDM" target="Net MT"/>
            <route prefix="!AIVDO" target="Net MT"/>
            <route prefix="$AITXT" target="Net"/>
        </nmea-0183-hs>
        <broadcast-nmea-0183 name="Net">
            <route prefix="$INRMC" target="Airmar"/>
            <route prefix="$??APB" target="Simrad1"/>
            <route prefix="$??BOD" target="Simrad1"/>
            <route prefix="$??BWW" target="Simrad1"/>
            <route prefix="$??BWC" target="Simrad1"/>
            <route prefix="$??BWR" target="Simrad1"/>
            <route prefix="$??RMB" target="Simrad1"/>
            <route prefix="$??XTE" target="Simrad1"/>
        </broadcast-nmea-0183>
        <datagram name="MT" address="5.9.207.224" port="5321">
        </datagram>
    </router>
</nmea>


